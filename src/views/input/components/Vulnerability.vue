<template>
    <!-- <div class="vulnerability-input-container"> -->
        <el-form ref="vulnerabilityForm" :model="vulnerabilityForm" label-position="top" label-width="180px">
            <el-row><span class="title">易脆性</span></el-row>
            <el-row :gutter="20">
                <el-col :xs="24" :sm="6" :lg="4">
                    <el-form-item label="易脆性结果生成方式">
                        <el-select v-model="vulnerabilityForm.frgl_Op" placeholder="请选择计算结果生成">
                            <el-option label="OpenFAST" value="1"></el-option>
                            <el-option label="OpenFAST+OpenSees" value="2"></el-option>
                        </el-select>
                    </el-form-item>
                </el-col>
                <el-col :xs="24" :sm="6" :lg="4">
                    <el-form-item label="忽略响应前N秒/s">
                        <el-input v-model="vulnerabilityForm.iniTI" placeholder="请输入忽略响应秒数"></el-input>
                    </el-form-item>
                </el-col>
                <el-col :xs="24" :sm="6" :lg="4">
                    <el-form-item label="响应方向性">
                        <el-select v-model="vulnerabilityForm.frgl_Res" placeholder="请选择响应的方向性">
                            <el-option label="顺风向" value="1"></el-option>
                            <el-option label="横风向" value="2"></el-option>
                            <el-option label="空间组合响应" value="3"></el-option>
                        </el-select>
                    </el-form-item>
                </el-col>
                <el-col :xs="24" :sm="6" :lg="4">
                    <el-form-item label="叶片易脆性">
                        <el-select v-model="vulnerabilityForm.frgl_Bld" placeholder="是否计算叶片易脆性">
                            <el-option label="是" value="1"></el-option>
                            <el-option label="否" value="2"></el-option>
                        </el-select>
                    </el-form-item>
                </el-col>
                <el-col :xs="24" :sm="6" :lg="4">
                    <el-form-item label="叶片损伤状态（位移角）">
                        <el-input v-model="vulnerabilityForm.ds_Bld" placeholder="请输入叶片损伤状态（位移角）"></el-input>
                    </el-form-item>
                </el-col>
                <el-col :xs="24" :sm="6" :lg="4">
                    <el-form-item label="叶片易脆性IDA范围">
                        <el-input v-model="vulnerabilityForm.imi_Bld" placeholder="叶片易脆性的风强范围"></el-input>
                    </el-form-item>
                </el-col>
                <el-col :xs="24" :sm="6" :lg="4">
                    <el-form-item label="机舱易脆性">
                        <el-select v-model="vulnerabilityForm.frgl_Nac" placeholder="是否计算机舱易脆性">
                            <el-option label="是" value="1"></el-option>
                            <el-option label="否" value="2"></el-option>
                        </el-select>
                    </el-form-item>
                </el-col>
                <el-col :xs="24" :sm="6" :lg="4">
                    <el-form-item label="机舱损伤状态（加速度）">
                        <el-input v-model="vulnerabilityForm.ds_Nac" placeholder="请输入机舱损伤状态（加速度）"></el-input>
                    </el-form-item>
                </el-col>
                <el-col :xs="24" :sm="6" :lg="4">
                    <el-form-item label="机舱易脆性IDA范围">
                        <el-input v-model="vulnerabilityForm.imi_Nac" placeholder="机舱易脆性的风速强度范围"></el-input>
                    </el-form-item>
                </el-col>
                <el-col :xs="24" :sm="6" :lg="4">
                    <el-form-item label="塔筒易脆性">
                        <el-select v-model="vulnerabilityForm.frgl_Twr" placeholder="是否计算塔筒易脆性">
                            <el-option label="是" value="1"></el-option>
                            <el-option label="否" value="2"></el-option>
                        </el-select>
                    </el-form-item>
                </el-col>
                <el-col :xs="24" :sm="6" :lg="4">
                    <el-form-item label="塔筒损伤类型">
                        <el-select v-model="vulnerabilityForm.ds_Twr_Type" placeholder="塔筒损伤类型">
                            <el-option label="塔顶位移角" value="1"></el-option>
                            <el-option label="塔底应力" value="2"></el-option>
                        </el-select>
                    </el-form-item>
                </el-col>
                <el-col :xs="24" :sm="6" :lg="4">
                    <el-form-item label="塔筒损伤状态">
                        <el-input v-model="vulnerabilityForm.ds_Twr" placeholder="请输入塔筒损伤状态"></el-input>
                    </el-form-item>
                </el-col>
                <el-col :xs="24" :sm="6" :lg="4">
                    <el-form-item label="塔筒易脆性IDA范围">
                        <el-input v-model="vulnerabilityForm.imi_Twr" placeholder="塔筒易脆性的风速强度范围"></el-input>
                    </el-form-item>
                </el-col>
                <el-col :xs="24" :sm="6" :lg="4">
                    <el-form-item label="单桩易脆性">
                        <el-select v-model="vulnerabilityForm.frgl_Sub" placeholder="是否计算下部结构易脆性">
                            <el-option label="是" value="1"></el-option>
                            <el-option label="否" value="2"></el-option>
                        </el-select>
                    </el-form-item>
                </el-col>
                <el-col :xs="24" :sm="6" :lg="4">
                    <el-form-item label="单桩损伤类型">
                        <el-select v-model="vulnerabilityForm.ds_Sub_Type" placeholder="请选择下部结构损伤类型">
                            <el-option label="平台位移角" value="1"></el-option>
                            <el-option label="基底应力" value="2"></el-option>
                        </el-select>
                    </el-form-item>
                </el-col>
                <el-col :xs="24" :sm="6" :lg="4">
                    <el-form-item label="单桩损伤状态">
                        <el-input v-model="vulnerabilityForm.ds_Sub" placeholder="请输入下部结构损伤状态"></el-input>
                    </el-form-item>
                </el-col>
                <el-col :xs="24" :sm="6" :lg="4">
                    <el-form-item label="单桩易脆性IDA范围">
                        <el-input v-model="vulnerabilityForm.imi_Sub" placeholder="下部结构易脆性的风速强度范围"></el-input>
                    </el-form-item>
                </el-col>
                <el-col :xs="24" :sm="6" :lg="4">
                    <el-form-item label="易脆性曲线风速强度范围">
                        <el-input v-model="vulnerabilityForm.hif" placeholder="易脆性曲线风速强度范围"></el-input>
                    </el-form-item>
                </el-col>
                <el-col :xs="24" :sm="6" :lg="4">
                    <el-form-item label="易脆性曲线步长 s">
                        <el-input v-model="vulnerabilityForm.dim" placeholder="易脆性曲线步长 s"></el-input>
                    </el-form-item>
                </el-col>
            </el-row>
            <el-row><span class="title">易损性</span></el-row>
            <el-row :gutter="20">
                <el-col :xs="24" :sm="12" :lg="4">
                    <el-form-item label="MCS数量">
                        <el-input v-model="vulnerabilityForm.num_RS" placeholder="请输入每个风速强度的MCS数量"></el-input>
                    </el-form-item>
                </el-col>
                <el-col :xs="24" :sm="12" :lg="4">
                    <el-form-item label="叶片损失比">
                        <el-input v-model="vulnerabilityForm.lossR_Bld" placeholder="请输入叶片损伤状态相应的损失比"></el-input>
                    </el-form-item>
                </el-col>
                <el-col :xs="24" :sm="12" :lg="4">
                    <el-form-item label="机舱损失比">
                        <el-input v-model="vulnerabilityForm.lossR_Nac" placeholder="请输入机舱损伤状态相应的损失比"></el-input>
                    </el-form-item>
                </el-col>
                <el-col :xs="24" :sm="12" :lg="4">
                    <el-form-item label="塔筒损失比">
                        <el-input v-model="vulnerabilityForm.lossR_Twr" placeholder="请输入塔筒损伤状态相应的损失比"></el-input>
                    </el-form-item>
                </el-col>
                <el-col :xs="24" :sm="12" :lg="4">
                    <el-form-item label="单桩损失比">
                        <el-input v-model="vulnerabilityForm.lossR_Mop" placeholder="请输入单桩损伤状态相应的损失比"></el-input>
                    </el-form-item>
                </el-col>
            </el-row>
            <el-row><span class="title">级联效应</span></el-row>
            <el-row :gutter="20">
                <el-col :xs="24" :sm="8" :lg="6">
                    <el-form-item label="扫塔'时塔筒和叶片损伤升级">
                        <el-select v-model="vulnerabilityForm.dep_Bld" style="width: 100%;" placeholder="'扫塔'时塔筒和叶片损伤状态是否调为'最严重'">
                            <el-option label="是" value="1"></el-option>
                            <el-option label="否" value="2"></el-option>
                        </el-select>
                    </el-form-item>
                </el-col>
                <el-col :xs="24" :sm="8" :lg="6">
                    <el-form-item label="机舱严重损伤时叶片损伤升级">
                        <el-select v-model="vulnerabilityForm.dep_Nac" style="width: 100%;" placeholder="机舱发生最严重损伤时叶片状态调为'最严重'">
                            <el-option label="是" value="1"></el-option>
                            <el-option label="否" value="2"></el-option>
                        </el-select>
                    </el-form-item>
                </el-col>
                <el-col :xs="24" :sm="8" :lg="6">
                    <el-form-item label="塔筒严重损伤时叶片和机舱损伤升级">
                        <el-select v-model="vulnerabilityForm.dep_Twr" style="width: 100%;"placeholder="塔筒发生最严重损伤时叶片和机舱状态调为'最严重'">
                            <el-option label="是" value="1"></el-option>
                            <el-option label="否" value="2"></el-option>
                        </el-select>
                    </el-form-item>
                </el-col>
                <el-col :xs="24" :sm="8" :lg="6">
                    <el-form-item label="单桩严重损伤时叶片，机舱和塔筒损伤升级">
                        <el-select v-model="vulnerabilityForm.dep_Mop" style="width: 100%;" placeholder="单桩发生最严重损伤时叶片，机舱和塔筒状态调为'最严重'">
                            <el-option label="是" value="1"></el-option>
                            <el-option label="否" value="2"></el-option>
                        </el-select>
                    </el-form-item>
                </el-col>
            </el-row>
            <el-form-item style="float: right;">
                <el-button type="primary" :loading="loading" @click="onSubmit">提交输入</el-button>
                <el-button>取消</el-button>
            </el-form-item>
        </el-form>
    <!-- </div> -->
</template>

<script>
export default {
    name: 'Vulnerability',
    props: {
      taskId: {
        type: String,
        required: true
      },
    },
    data() {
        return {
            vulnerabilityForm: {
                frgl_Op: '1',
                iniTI: '3',
                frgl_Res: '1',
                frgl_Bld: '1',
                ds_Bld: '[0.01,0.02,0.04]',
                imi_Bld: '[All,All,All]',
                frgl_Nac: '1',
                ds_Nac: '[0.2,0.4,0.6]',
                imi_Nac: '[All,All,All]',
                frgl_Twr: '1',
                ds_Twr_Type: '1',
                ds_Twr: '[0.001,0.002,0.003]',
                imi_Twr: '[All,All,All]',
                frgl_Sub: '1',
                ds_Sub_Type: '1',
                ds_Sub: '[0.003,0.006,0.009]',
                imi_Sub: '[All,All,All]',
                hif: '[3,25]',
                dim: '0.01',
                num_RS: '100',
                lossR_Bld: '[0,0.4,0.8,1]',
                lossR_Nac: '[0,0.4,0.8,1]',
                lossR_Twr: '[0,0.4,0.8,1]',
                lossR_Mop: '[0,0.4,0.8,1]',
                dep_Bld: '1',
                dep_Nac: '1',
                dep_Twr: '1',
                dep_Mop: '1',
                taskId: this.taskId
            },
            loading: false
        }
    },
    methods: {
        onSubmit() {
            this.loading = true
            this.$store.dispatch('task/configTaskStep3', this.vulnerabilityForm).then(() => {
                this.$message({
                    message: '提交成功',
                    type: 'success',
                })
                // this.$emit('update-active-name', 'Uncertainty');
                this.$router.push({ path: '/dashboard'});
                this.loading = false
            }).catch(() => {
                this.$message({
                    message: '提交失败',
                    type: 'error',
                })
                this.loading = false
            })
        },
        updateForm(newData) {
            // console.log("update vulnerabilityForm");
            this.vulnerabilityForm = { ...newData };
        }
    }
}
</script>

<style lang="scss" scoped>
    .vulnerability-input-container {
        padding: 32px;
        background-color: rgb(240, 242, 245);
        position: relative;
        height: 100%;
    }
    .title {
        display: flex;
        align-items: center;
        font-size: 16px;
        margin-bottom: 10px;
    }

    .title::before {
        content: '';
        display: inline-block;
        width: 4px;
        height: 20px;
        background-color: blue;
        margin-right: 8px;
    }
</style>